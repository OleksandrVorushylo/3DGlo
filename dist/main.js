(()=>{"use strict";(function(e){const t=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),l=document.getElementById("timer-seconds");!function e(){const n=function(){const e=(new Date("15 september 2021").getTime()-(new Date).getTime())/1e3;let t=Math.floor(e%60),o=Math.floor(e/60%60),l=Math.floor(e/60/60);return l<10&&(l="0"+l),o<10&&(o="0"+o),t<10&&(t="0"+t),{timeRemaining:e,hours:l,minutes:o,seconds:t}}();t.textContent=n.hours,o.textContent=n.minutes,l.textContent=n.seconds,n.timeRemaining>0?setTimeout(e,1e3):(t.textContent="00",o.textContent="00",l.textContent="00")}()})(),(()=>{const e=document.querySelector("menu");function t(){e.classList.toggle("active-menu")}document.addEventListener("click",(o=>{const l=o.target;l.closest(".menu")&&t(),l.closest(".close-btn")&&(o.preventDefault(),t()),l.closest("UL>LI>A")&&t(),l.closest(".active-menu")||l.closest(".menu")||!l.closest("UL>LI>A")||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content");document.querySelector(".form-btn");let l=0;t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block",window.screen.width>768&&function e(){l+=7,o.style.top=l+"px",l<=200&&setTimeout(e,8)}()}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?(e.style.display="none",l=0):(o=o.closest(".popup-content"),o||(e.style.display="none",l=0))}))})(),function(){const e=document.querySelectorAll('a[href*="#"]');for(const t of e)t.addEventListener("click",(e=>{e.preventDefault();const o=t.getAttribute("href");document.querySelectorAll(".portfolio-btn"),e.target.classList.contains("portfolio-btn")?e.preventDefault():document.querySelector(""+o).scrollIntoView({behavior:"smooth",block:"start"})}))}(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let l=e.target;l=l.closest(".service-header-tab"),l&&t.forEach(((e,n)=>{e===l&&(e=>{for(let l=0;l<o.length;l++)e===l?(t[l].classList.add("active"),o[l].classList.remove("d-none")):(t[l].classList.remove("active"),o[l].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-content"));(()=>{const t=document.querySelector(".portfolio-dots");for(let o=0;o<e.length;o++){const e=document.createElement("li");e.classList.add("dot"),t.appendChild(e)}})();const o=document.querySelectorAll(".dot");o[0].classList.add("dot-active");let l,n=0;const r=(e,t,o)=>{e[t].classList.remove(o)},c=(e,t,o)=>{e[t].classList.add(o)},a=()=>{r(e,n,"portfolio-item-active"),r(o,n,"dot-active"),n++,n>=e.length&&(n=0),c(e,n,"portfolio-item-active"),c(o,n,"dot-active")},s=(e=5e3)=>{l=setInterval(a,e)};t.addEventListener("click",(t=>{t.preventDefault();const l=t.target;l.matches("#arrow-right, #arrow-left, .dot")&&(r(e,n,"portfolio-item-active"),r(o,n,"dot-active"),l.matches("#arrow-right")?n++:l.matches("#arrow-left")?n--:l.matches(".dot")&&o.forEach(((e,t)=>{e===l&&(n=t)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),c(e,n,"portfolio-item-active"),c(o,n,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(l)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s(6e3)})),s(6e3)})(),document.querySelectorAll(".command__photo").forEach((e=>{let t;e.addEventListener("mouseover",(e=>{t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseout",(e=>{e.target.src=t}))})),(()=>{document.querySelectorAll(".calc-item").forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/\D/g,"")}))}));const e=document.querySelectorAll("form"),t=document.querySelectorAll("input"),o=document.querySelectorAll(".btn"),l=document.querySelectorAll(".form-phone")[0],n=document.querySelectorAll(".form-phone")[1],r=document.querySelectorAll(".form-phone")[2];l.setAttribute("minlength","10"),n.setAttribute("minlength","10"),r.setAttribute("minlength","10"),e.forEach((e=>{const t=document.createElement("div");t.className="error-phone",t.textContent="Номер должен быть в формате +7(XXX)XXX-XX-XX\n                              Количество символов: 10",t.style.fontSize="10px",t.style.color="white",e.addEventListener("input",(l=>{const n=l.target;"form2-name"!==n.id&&"form2-message"!==n.id&&"form1-name"!==n.id&&"form3-name"!==n.id||(n.value=n.value.replace(/[^а-яё -,.]/gi,"")),"form2-email"!==n.id&&"form1-email"!==n.id&&"form3-email"!==n.id||(n.value=n.value.replace(/[^a-z0-9@-_.!~*']/gi,"")),"form1-phone"!==n.id&&"form2-phone"!==n.id&&"form3-phone"!==n.id||(n.value=n.value.replace(/^\+?[0378]([-()]*\d){9,11}$/gi,""),e.addEventListener("input",(()=>{n.value.length<18&&(o[0].disabled=!0,o[4].disabled=!0,o[5].disabled=!0,n.insertAdjacentElement("afterend",t),t.style.display="block"),n.value.length>=18&&(o[0].disabled=!1,o[4].disabled=!1,o[5].disabled=!1,t.style.display="none")})))}))})),t.forEach((e=>{e.addEventListener("blur",(e=>{const t=e.target;"form2-name"!==t.id&&"form1-name"!==t.id&&"form3-name"!==t.id||(t.value=t.value.replace(/[^а-яё -]/gi,""),t.value=t.value.trim(),t.value=t.value.replace(/\s+/gi," "),t.value.match(/^-+|-+$/)?(t.value=t.value.replace(/^-+|-+$/g,""),t.value.match(/^\s+|\s+$/)&&(t.value=t.value.replace(/^\s+|\s+$/g,""))):t.value=t.value.replace(/-+/g,"-")),"form2-message"===t.id&&(t.value=t.value.replace(/[^а-яё -,.]/gi,""),t.value=t.value.trim(),t.value=t.value.replace(/\s+/gi," ")),"form2-email"!==t.id&&"form1-email"!==t.id&&"form3-email"!==t.id||(t.value=t.value.replace(/[^a-z0-9@-_.!~*']/gi,""),t.value=t.value.trim(),t.value=t.value.replace(/\s+/gi," ")),"form1-phone"!==t.id&&"form2-phone"!==t.id&&"form3-phone"!==t.id||(t.value=t.value.replace(/^\+?[0378]([-()]*\d){9,11}$/gi,""),t.value=t.value.trim(),t.value=t.value.replace(/\s+/gi," "))}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),l=document.querySelector(".calc-square"),n=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),c=(document.querySelectorAll("select>option")[2],document.getElementById("total"));t.addEventListener("change",(t=>{const a=t.target;(a.matches("select")||a.matches("input"))&&(()=>{let t=0,a=1,s=1;const i=o.options[o.selectedIndex].value,u=+l.value;let d;n.value>1&&(a+=(n.value-1)/10),r.value&&r.value<5?s*=2:r.value&&r.value<10&&(s*=1.5),d=2===o.selectedIndex?i-1.6:i,0===o.selectedIndex&&(n.value="",l.value="",r.value=""),i&&u&&(t=e*d*u*a*s),c.textContent=Math.round(t)})()}))})(100),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.style.cssText="font-size: 2rem;\n                                  color: white;",e.forEach((e=>{const o=document.querySelector(".popup");e.addEventListener("submit",(n=>{n.preventDefault(),e.appendChild(t),t.textContent="Загрузка...";const r=new FormData(e),c={};r.forEach(((e,t)=>{c[t]=e})),l(c).then((e=>{if(200!==e.status)throw new Error("status network not 200.");t.textContent="Спасибо! Мы скоро с вами свяжемся!",setTimeout((()=>{t.textContent=""}),3e3),setTimeout((()=>{o.style.display="none"}),6e3)})).catch((e=>{t.textContent="Что то пошло не так",console.error(e),setTimeout((()=>{t.textContent=""}),3e3),setTimeout((()=>{o.style.display="none"}),6e3)})),[...e].forEach((e=>{e.value=""}))}));const l=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}))})()})();